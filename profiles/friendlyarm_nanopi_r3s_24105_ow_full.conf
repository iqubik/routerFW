# === Profile for friendlyarm_nanopi-r3s (OpenWrt 24.10.5) ===

PROFILE_NAME="friendlyarm_nanopi_r3s_24105_ow_full"
TARGET_PROFILE="friendlyarm_nanopi-r3s"

COMMON_LIST="base-files ca-bundle dnsmasq dropbear e2fsprogs firewall4 fstools kmod-gpio-button-hotplug kmod-nft-offload kmod-r8169 libc libgcc libustream-mbedtls logd luci mkf2fs mtd netifd nftables odhcp6c odhcpd-ipv6only opkg partx-utils ppp ppp-mod-pppoe procd-ujail uboot-envtools uci uclient-fetch urandom-seed urngd"

# === IMAGE BUILDER CONFIG
IMAGEBUILDER_URL="https://downloads.openwrt.org/releases/24.10.5/targets/rockchip/armv8/openwrt-imagebuilder-24.10.5-rockchip-armv8.Linux-x86_64.tar.zst"
IMAGE_PKGS="$COMMON_LIST"

#CUSTOM_KEYS="https://fantastic-packages.github.io/releases/24.10/53ff2b6672243d28.pub"
#CUSTOM_REPOS="src/gz fantastic_luci https://fantastic-packages.github.io/releases/24.10/packages/mipsel_24kc/luci
#src/gz fantastic_packages https://fantastic-packages.github.io/releases/24.10/packages/mipsel_24kc/packages
#src/gz fantastic_special https://fantastic-packages.github.io/releases/24.10/packages/mipsel_24kc/special"
#DISABLED_SERVICES="transmission-daemon minidlna"
#IMAGE_EXTRA_NAME="custom"

# === Extra config options
#ROOTFS_SIZE="512"
#KERNEL_SIZE="64"

# === SOURCE BUILDER CONFIG
SRC_REPO="https://github.com/openwrt/openwrt.git"
SRC_BRANCH="v24.10.5"
SRC_TARGET="rockchip"
SRC_SUBTARGET="armv8"
SRC_ARCH="aarch64_generic"
SRC_PACKAGES="$IMAGE_PKGS"
SRC_CORES="safe"

## SPACE SAVING (For 4MB / 8MB flash devices)
#    - CONFIG_LUCI_SRCDIET=y      -> Compresses Lua/JS in LuCI (saves ~100-200KB)
#    - CONFIG_IPV6=n              -> Completely removes IPv6 support (saves ~300KB)
#    - CONFIG_KERNEL_DEBUG_INFO=n -> Removes debugging information from the kernel
#    - CONFIG_STRIP_KERNEL_EXPORTS=y -> Strips kernel export symbols (if no external kmods needed)
## FILE SYSTEMS (For SD cards / x86 / NanoPi)
#    By default, SquashFS (Read-Only) is created. EXT4 is recommended for SBCs.
#    - CONFIG_TARGET_ROOTFS_SQUASHFS=n -> Disable SquashFS
#    - CONFIG_TARGET_ROOTFS_EXT4FS=y   -> Enable EXT4 (Read/Write partition)
#    - CONFIG_TARGET_ROOTFS_TARGZ=y    -> Create an archive (for containers/backups)
## DEBUGGING AND LOGS
#    - CONFIG_KERNEL_PRINTK=n     -> Disables boot log output to console (quiet boot)
#    - CONFIG_BUILD_LOG=y         -> Saves build logs for each package (to debug build errors)
## FORCED MODULE INCLUSION
#    If a package fails to install via SRC_PACKAGES, you can force-enable it here.
# CONFIG_PACKAGE_kmod-usb-net-rndis=y

SRC_EXTRA_CONFIG='CONFIG_TARGET_rockchip=y
CONFIG_TARGET_rockchip_armv8=y
CONFIG_TARGET_rockchip_armv8_DEVICE_friendlyarm_nanopi-r3s=y
CONFIG_DEVEL=y
CONFIG_PACKAGE_block-mount=y
CONFIG_PACKAGE_cgi-io=y
CONFIG_PACKAGE_libiwinfo=y
CONFIG_PACKAGE_libiwinfo-data=y
CONFIG_PACKAGE_liblucihttp=y
CONFIG_PACKAGE_liblucihttp-ucode=y
CONFIG_PACKAGE_luci=y
CONFIG_PACKAGE_luci-app-firewall=y
CONFIG_PACKAGE_luci-app-package-manager=y
CONFIG_PACKAGE_luci-base=y
CONFIG_PACKAGE_luci-light=y
CONFIG_PACKAGE_luci-mod-admin-full=y
CONFIG_PACKAGE_luci-mod-network=y
CONFIG_PACKAGE_luci-mod-status=y
CONFIG_PACKAGE_luci-mod-system=y
CONFIG_PACKAGE_luci-proto-ipv6=y
CONFIG_PACKAGE_luci-proto-ppp=y
CONFIG_PACKAGE_luci-theme-bootstrap=y
CONFIG_PACKAGE_rpcd=y
CONFIG_PACKAGE_rpcd-mod-file=y
CONFIG_PACKAGE_rpcd-mod-iwinfo=y
CONFIG_PACKAGE_rpcd-mod-luci=y
CONFIG_PACKAGE_rpcd-mod-rrdns=y
CONFIG_PACKAGE_rpcd-mod-ucode=y
CONFIG_PACKAGE_ucode-mod-html=y
CONFIG_PACKAGE_ucode-mod-math=y
CONFIG_PACKAGE_uhttpd=y
CONFIG_PACKAGE_uhttpd-mod-ubus=y
CONFIG_TARGET_OPTIMIZATION="-O2 -pipe -mcpu=generic"
CONFIG_TARGET_OPTIONS=y
CONFIG_TARGET_ROOTFS_TARGZ=y'
