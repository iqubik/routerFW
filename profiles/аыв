# === Profile for friendlyarm_nanopi-r3s (OpenWrt 24.10.5) ===

PROFILE_NAME="friendlyarm_nanopi_r3s_24105_ow_full"
TARGET_PROFILE="friendlyarm_nanopi-r3s"

# Пакеты по умолчанию (Target Default +/- Device Specific)
DEFAULT_PACKAGES="base-files ca-bundle dnsmasq dropbear e2fsprogs firewall4 fstools kmod-gpio-button-hotplug kmod-nft-offload kmod-r8169 libc libgcc libustream-mbedtls logd mkf2fs mtd netifd nftables odhcp6c odhcpd-ipv6only opkg partx-utils ppp ppp-mod-pppoe procd-ujail uboot-envtools uci uclient-fetch urandom-seed urngd"

# Ваши дополнительные пакеты
COMMON_LIST="luci"

# === IMAGE BUILDER CONFIG
IMAGEBUILDER_URL="https://downloads.open…8.Linux-x86_64.tar.zst"
PKGS="$DEFAULT_PACKAGES $COMMON_LIST"
EXTRA_IMAGE_NAME="custom"
CUSTOM_KEYS="https://fantastic-packages.github.io/releases/24.10/53ff2b6672243d28.pub"
CUSTOM_REPOS="src/gz fantastic_luci https://fantastic-packages.github.io/releases/24.10/packages/mipsel_24kc/luci
src/gz fantastic_packages https://fantastic-packages.github.io/releases/24.10/packages/mipsel_24kc/packages
src/gz fantastic_special https://fantastic-packages.github.io/releases/24.10/packages/mipsel_24kc/special"
#DISABLED_SERVICES="transmission-daemon minidlna"

# === SOURCE BUILDER CONFIG
SRC_REPO="https://github.com/openwrt/openwrt.git"
SRC_BRANCH="v24.10.5"
SRC_TARGET="rockchip"
SRC_SUBTARGET="armv8"
SRC_ARCH="aarch64_generic"
SRC_PACKAGES="$PKGS"
SRC_CORES="safe"

# === Extra config options
#ROOTFS_SIZE="512"
#KERNEL_SIZE="64"
SRC_EXTRA_CONFIG="CONFIG_TARGET_MULTI_PROFILE=n \
CONFIG_BUILD_LOG=y"

## SPACE SAVING (For 4MB / 8MB flash devices)
# - CONFIG_LUCI_SRCDIET=y -> Compresses Lua/JS in LuCI (saves ~100-200KB)
# - CONFIG_IPV6=n -> Completely removes IPv6 support (saves ~300KB)
# - CONFIG_KERNEL_DEBUG_INFO=n -> Removes debugging information from the kernel
# - CONFIG_STRIP_KERNEL_EXPORTS=y -> Strips kernel export symbols (if no external kmods needed)
# SRC_EXTRA_CONFIG="CONFIG_LUCI_SRCDIET=y CONFIG_IPV6=n CONFIG_KERNEL_DEBUG_INFO=n"

## FILE SYSTEMS (For SD cards / x86 / NanoPi)
# By default, SquashFS (Read-Only) is created. EXT4 is recommended for SBCs.
# - CONFIG_TARGET_ROOTFS_SQUASHFS=n -> Disable SquashFS
# - CONFIG_TARGET_ROOTFS_EXT4FS=y -> Enable EXT4 (Read/Write partition)
# - CONFIG_TARGET_ROOTFS_TARGZ=y -> Create an archive (for containers/backups)
# CONFIG_TARGET_ROOTFS_SQUASHFS=n CONFIG_TARGET_ROOTFS_EXT4FS=y

## DEBUGGING AND LOGS
# - CONFIG_KERNEL_PRINTK=n -> Disables boot log output to console (quiet boot)
# - CONFIG_BUILD_LOG=y -> Saves build logs for each package (to debug build errors)
# CONFIG_BUILD_LOG=y

## FORCED MODULE INCLUSION
# If a package fails to install via SRC_PACKAGES, you can force-enable it here.
# CONFIG_PACKAGE_kmod-usb-net-rndis=y