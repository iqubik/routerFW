[size=4][b]üöÄ RAX3000M/ME/eMMC & XR30: –ü—Ä–æ—à–∏–≤–∫–∞ Padavanonly + –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å–±–æ—Ä–æ–∫ (Builder)[/b][/size]

[b]–í –¥–≤—É—Ö —Å–ª–æ–≤–∞—Ö:[/b] –£–¥–∞–ª–æ—Å—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—à–∏–≤–∫—É –Ω–∞ –±–∞–∑–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è [i]Padavanonly[/i] (Kernel 6.6) –Ω–∞ –∫–∞–ø—Ä–∏–∑–Ω–æ–π –≤–µ—Ä—Å–∏–∏ [b]RAX3000M eMMC[/b]. –ü–æ–ø—É—Ç–Ω–æ –±—ã–ª —Å–æ–∑–¥–∞–Ω —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç (Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä), –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –ª—é–±–æ–º—É –∂–µ–ª–∞—é—â–µ–º—É —Å–æ–±—Ä–∞—Ç—å —Å–≤–æ—é –≤–µ—Ä—Å–∏—é –ø—Ä–æ—à–∏–≤–∫–∏ –ø–æ–¥ –ª—é–±—É—é –º–æ–¥–µ–ª—å —Å–µ–º–µ–π—Å—Ç–≤–∞ [b](M, ME, XR30)[/b] –±–µ–∑ –≥–ª—É–±–æ–∫–∏—Ö –∑–Ω–∞–Ω–∏–π Linux.

[b]–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —ç—Ç–∞ —Å–±–æ—Ä–∫–∞?[/b]
[spoiler][list][*] [b]–ó–∞–∫—Ä—ã—Ç—ã–µ –¥—Ä–∞–π–≤–µ—Ä—ã MTK Wi-Fi:[/b] –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç OpenSource (mt76), –ø—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω—ã–µ –¥—Ä–∞–π–≤–µ—Ä—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ 160 –ú–ì—Ü, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Beamforming –∏ —Ä–∞–±–æ—Ç—É MU-MIMO.
[*] [b]–ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ (HWNAT + WED):[/b] –ü–æ–ª–Ω–∞—è —Ä–∞–∑–≥—Ä—É–∑–∫–∞ CPU.
[i]WED (Wireless Ethernet Dispatcher)[/i] ‚Äî Wi-Fi —Ç—Ä–∞—Ñ–∏–∫ –∏–¥–µ—Ç —Å—Ä–∞–∑—É –≤ —Å–µ—Ç–µ–≤–æ–π —É—Å–∫–æ—Ä–∏—Ç–µ–ª—å.
[i]PPE (Packet Process Engine)[/i] ‚Äî NAT –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ.
[*] [b]–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π Vermagic:[/b] –í –ø—Ä–æ—Ñ–∏–ª–µ —Å–±–æ—Ä–∫–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ö–∞–∫ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤–µ—Ä–Ω–æ–≥–æ —Ö—ç—à–∞ —è–¥—Ä–∞. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å kmod-–ø–∞–∫–µ—Ç—ã –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤, –Ω–µ –ø–æ–ª—É—á–∞—è –æ—à–∏–±–∫—É —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —è–¥—Ä–∞.
[*] [b]–†–∞–±–æ—Ç–∞—é—â–∏–π OverlayFS –Ω–∞ eMMC:[/b] –†–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ä–∞–∑–¥–µ–ª–∞ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –Ω–∞ eMMC –≤–µ—Ä—Å–∏—è—Ö.
[/list][b]**–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**[/b]
–í—ã –º–æ–∂–µ—Ç–µ –∫–∞—á–∞—Ç—å —Ç–æ—Ä—Ä–µ–Ω—Ç –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ 1 –ì–±–∏—Ç/—Å —á–µ—Ä–µ–∑ –∫–∞–±–µ–ª—å –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—ã–µ 55–≥–± –¥–æ—Å—Ç—É–ø–Ω—ã–µ –Ω–∞ emmc –≤–µ—Ä—Å–∏–∏ –∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å 4K —Ñ–∏–ª—å–º –ø–æ Wi-Fi –Ω–∞ —Ç–µ–ª–µ–≤–∏–∑–æ—Ä–µ, –∏ –ø—Ä–∏ —ç—Ç–æ–º –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä —Ä–æ—É—Ç–µ—Ä–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –≤—Å–µ–≥–æ –Ω–∞ **2-5%**.
–û—Å—Ç–∞–≤—à–∏–µ—Å—è 95% –º–æ—â–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –º–æ–∂–Ω–æ –ø—É—Å—Ç–∏—Ç—å –Ω–∞ VPN (WireGuard/Xray), –±–ª–æ–∫–∏—Ä–æ–≤–∫—É —Ä–µ–∫–ª–∞–º—ã (AdGuard Home) –∏–ª–∏ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã. –í —ç—Ç–æ–º –∏ –µ—Å—Ç—å –≥–ª–∞–≤–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å —ç—Ç–æ–π —Å–±–æ—Ä–∫–∏.[/spoiler]
[size=3][b]üì¶ –ì–æ—Ç–æ–≤—ã–µ —Å–±–æ—Ä–∫–∏ (–°–∫–∞—á–∞—Ç—å)[/b][/size]
–Ø –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª –∞—Ä—Ö–∏–≤, –≤ –∫–æ—Ç–æ—Ä–æ–º –µ—Å—Ç—å –ø—Ä–µ–¥—Å–æ–±—Ä–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–∑—ã [b]—Å—Ä–∞–∑—É –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π[/b] (NAND, eMMC, XR30, ME).
–í–Ω—É—Ç—Ä–∏: –æ–±—Ä–∞–∑—ã sysupgrade, factory, –∑–∞–≥—Ä—É–∑—á–∏–∫–∏ (FIP/BL31) –∏ —Ñ–∞–π–ª—ã –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è. –ò–º–µ–π—Ç–µ –≤–≤–∏–¥—É, —á—Ç–æ –≤ –∞—Ä—Ö–∏–≤–µ –º–æ–≥—É—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –Ω—É–∂–Ω—ã–µ –∑–∞–ø—á–∞—Å—Ç–∏, –º—ã –¥–∞–ª–µ–µ –ø–æ —Ö–æ–¥—É –¥–µ–ª–∞ –ø—Ä–æ—è—Å–Ω–∏–º —Å–∏—Ç—É–∞—Ü–∏—é.
[b]‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å:[/b] [url="https://github.com/iqubik/routerFW/raw/refs/heads/main/builds/all_rax3000_padavanonly.zip?download="][b]all_rax3000_padavanonly.zip[/b][/url] [i]IP –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 192.168.6.1[/i]
[spoiler=–°–æ—Å—Ç–∞–≤ –∞—Ä—Ö–∏–≤–∞ (—á—Ç–æ –≤–Ω—É—Ç—Ä–∏)]
[code]
...cmcc_rax3000m-emmc-mtk-squashfs-sysupgrade.bin  <-- –î–ª—è eMMC –≤–µ—Ä—Å–∏–∏
...cmcc_rax3000m-nand-mtk-squashfs-sysupgrade.bin  <-- –î–ª—è –æ–±—ã—á–Ω–æ–π NAND –≤–µ—Ä—Å–∏–∏
...cmcc_rax3000me-squashfs-sysupgrade.itb          <-- –î–ª—è ME –≤–µ—Ä—Å–∏–∏
...cmcc_xr30-nand-squashfs-sysupgrade.bin          <-- –î–ª—è XR30
+ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ, —Ç–µ –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–±—Ä–∞–ª–∏—Å—å –≤–º–µ—Å—Ç–µ —Å –ø—Ä–æ—à–∏–≤–∫–∞–º–∏ –∑–∞–≥—Ä—É–∑—á–∏–∫–∏ (Preloader/U-boot) –∏ Factory –æ–±—Ä–∞–∑—ã.
[/code]
[/spoiler]
[size=3][b]üíÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–æ—à–∏–≤–∫–µ RAX3000M eMMC[/b][/size]
[background="#ffebe8"][color=red][b]–í–ù–ò–ú–ê–ù–ò–ï:[/b][/color] –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å eMMC (–∫–æ–º–∞–Ω–¥–∞ `dd`) –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã. –û—à–∏–±–∫–∞ –≤ –æ–¥–Ω—É —Ü–∏—Ñ—Ä—É ‚Äî –∫–∏—Ä–ø–∏—á. –î–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø—ã –∏ –≥–æ—Ç–æ–≤—å—Ç–µ UART![/background]
–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ eMMC –≤–µ—Ä—Å–∏—é —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞ GPT. –ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ —Å—Ç–æ–∏—Ç –∫–∞—Å—Ç–æ–º–Ω–∞—è –≤–µ—Ä–Ω–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞, –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ sysupgrade. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî —à—å–µ–º –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ SSH.
[spoiler=üìÇ –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã: —Ä–∞–∑–º–µ—Ç–∫–∞ —Ä–∞–∑–¥–µ–ª–∞ (GPT)]
[b]–≤–∞—Ä–∏–∞–Ω—Ç 1: –°–∫–∞—á–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Ä–∞–∑–¥–µ–ª–æ–≤:[/b] [attachment="34916185:gpt-rax3000m-emmc.zip"]
[b]–í–∞—Ä–∏–∞–Ω—Ç 2: GPT —Å–æ SWAP 2GB:[/b] [attachment="34916181:gpt-rax3000m-emmc-swap.zip"]
–û—Ç–∫—É–¥–∞ –æ–Ω–∏ –≤–∑—è–ª–∏—Å—å? –° –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ —Ä–∞–∑–º–µ—Ç–∫–∏:
–ò –≥–¥–µ-—Ç–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–ª—É—á–∞–π–Ω–æ –≤–º–µ—Å—Ç–æ uboot-mod –Ω–∞—à—ë–ª –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç–∞–∫–æ–π —Ç–∞–±–ª–∏—Ü—ã. –° –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞ –Ω–∞ —Ä–æ–¥–Ω—É—é —Ä–∞–∑–º–µ—Ç–∫—É –ø–æ—Å–ª–µ owrt iwrtPadMod –Ω–µ –≤—Å—Ç–∞–≤–∞–ª
[url="https://github.com/Yuzhii0718/bl-mt798x-dhcpd"]https://github.com/Yuzhii0718/bl-mt798x-dhcpd[/url]
[spoiler=‚ÑπÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: –†–∞–∑–º–µ—Ç–∫–∞ –¥–∏—Å–∫–∞]
–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ —Ç–µ—Ö, –∫—Ç–æ —Ö–æ—á–µ—Ç –ø–æ–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É GPT (–≤–µ—Ä—Å–∏—è —Å–æ swap):
[b]–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ GPT:[/b] [url="https://github.com/Yuzhii0718/bl-mt798x-dhcpd"]bl-mt798x-dhcpd[/url]
[code]
{
    "u-boot-env" : { "start": 8192, "end" : 9215, "part_type_guid": "{3de21764-95bd-54bd-a5c3-4abe786f38a8}" },
    "factory" : { "start": 9216, "end" : 13311 },
    "fip": { "start": 13312, "end" : 21503 },
    "kernel" : { "start": 21504, "end" : 152575 },
    "rootfs" : { "start": 152576, "end" : 1201151 },
    "rootfs_data" : { "start": 1201152, "end" : 117931007 },
    "swap" : { "start": 117931008, "end" : 122125311, "part_type_guid": "{0657FD6D-A4AB-43C4-84E5-0933C84B4F4F}" }
}
[/code][/spoiler][/spoiler]
[spoiler=üìÇ –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã: –∑–∞–≥—Ä—É–∑—á–∏–∫ (bl)]
[b]–°–∫–∞—á–∞—Ç—å —Å–æ–±—Ä–∞–Ω–Ω—ã–π –∑–∞–≥—Ä—É–∑—á–∏–∫[/b] [attachment="34916535:u-boot.zip"]
–û—Ç–∫—É–¥–∞ –≤–∑—è–ª—Å—è? –≠—Ç–æ —Å–æ–±—Ä–∞–Ω–Ω—ã–π —Ñ–æ—Ä–∫ –æ—Ç –∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ —Ä–µ–ø–æ uboot-mod –æ—Ç hanwckf [url="https://github.com/Yuzhii0718/bl-mt798x-dhcpd"]https://github.com/Yuzhii0718/bl-mt798x-dhcpd[/url]
[i]–ó–∞–º–µ—Ç–∫–∞:–º–æ–¥–Ω—ã–π 2025 —É –º–µ–Ω—è –ø—Ä–∞–≤–¥–∞ –Ω–µ —Å–æ–±—Ä–∞–ª—Å—è, –Ω–æ –∏ 2024 –æ–∫–∞–∑–∞–ª—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω[/i][/spoiler]
[spoiler=‚öôÔ∏è –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (Manual Install)]
[b]–®–∞–≥ 0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞[/b]
–ó–∞–∫–∏–Ω—å—Ç–µ —Ñ–∞–π–ª—ã (`gpt.bin`, `u-boot.fip`, `kernel.bin`, `rootfs.bin`) –≤ –ø–∞–ø–∫—É `/tmp` —Ä–æ—É—Ç–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ WinSCP).
–§–∞–π–ª—ã kernel –∏ rootfs –º–æ–∂–Ω–æ –∏–∑–≤–ª–µ—á—å –∏–∑ sysupgrade-–æ–±—Ä–∞–∑–∞ –ø—Ä–æ—à–∏–≤–∫–∏ –æ–±—ã—á–Ω—ã–º –∞—Ä—Ö–∏–≤–∞—Ç–æ—Ä–æ–º 7zip.

–ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ eMMC –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∞—Å—å –∫–∞–∫ `mmcblk0`:
[code]lsblk[/code]

[b]–®–∞–≥ 1: –ó–∞–ø–∏—Å—å —Ç–∞–±–ª–∏—Ü—ã —Ä–∞–∑–¥–µ–ª–æ–≤ (GPT)[/b]
[code]dd if=/tmp/gpt-rax3000m-emmc-swap.bin of=/dev/mmcblk0 bs=512 count=34 conv=notrunc[/code]

[b]–®–∞–≥ 2: –ó–∞–ø–∏—Å—å –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ (U-Boot / FIP)[/b]
[code]dd if=/tmp/u-boot.fip of=/dev/mmcblk0 bs=512 seek=13312 conv=notrunc[/code]

[b]–®–∞–≥ 3: –ó–∞–ø–∏—Å—å –Ø–¥—Ä–∞ (Kernel)[/b]
[code]dd if=/tmp/kernel.bin of=/dev/mmcblk0 bs=512 seek=21504 conv=notrunc[/code]

[b]–®–∞–≥ 4: –ó–∞–ø–∏—Å—å –§–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã (RootFS)[/b]
[code]dd if=/tmp/rootfs.bin of=/dev/mmcblk0 bs=512 seek=152576 conv=notrunc[/code]

[b]–®–∞–≥ 5: –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è[/b]
–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –±—É—Ñ–µ—Ä—ã!
[code]sync[/code]
–ñ–¥–µ–º 10 —Å–µ–∫—É–Ω–¥ –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º—Å—è:
[code]reboot[/code]
[i]–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–ª–≥–∏–º, –∏–¥–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤.[/i]
[/spoiler]
[size=3][b]üõ†Ô∏è RouterFW ‚Äî –°–æ–±–µ—Ä–∏ —Å–∞–º (Docker Builder)[/b][/size]
–ï—Å–ª–∏ –≤–∞–º –Ω–µ –ø–æ–¥—Ö–æ–¥—è—Ç –≥–æ—Ç–æ–≤—ã–µ —Å–±–æ—Ä–∫–∏ (–Ω—É–∂–µ–Ω —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π —Å–æ—Ñ—Ç, –º–æ–¥–µ–º—ã, Docker), –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ—à–∏–≤–∫—É —Å–∞–º–∏ –∑–∞ –ø–∞—Ä—É –∫–ª–∏–∫–æ–≤. –ù–µ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å Linux-–æ–∫—Ä—É–∂–µ–Ω–∏–µ, –≤—Å—ë —É–ø–∞–∫–æ–≤–∞–Ω–æ –≤ Docker.
[i]–ü—Ä–æ—Ñ–∏–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ. –ú–æ–∂–Ω–æ –∑–∞–π—Ç–∏ –≤ Menuconfig –∏ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–∏ –ø–∞–∫–µ—Ç—ã (—á–µ—Ä–µ–∑ import ipk –∏–ª–∏ –≤—ã–±–æ—Ä –≤ –º–µ–Ω—é). –ü–µ—Ä–≤–∞—è —Å–±–æ—Ä–∫–∞ ~2 —á–∞—Å–∞ (–≤—ã–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ –∏ —Å–±–æ—Ä–∫–∞ —Ç—É–ª—á–µ–π–Ω–æ–≤), –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ ‚Äî –º–∏–Ω—É—Ç—ã.[/i]
[b]–°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ–µ–∫—Ç:[/b] [url="https://github.com/iqubik/routerFW"][b]Github: iqubik/routerFW[/b][/url]
[spoiler=–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç]
1. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç–µ [url="https://desktop.docker.com/win/main/amd64/Docker%20Desktop%20Installer.exe?utm_source=docker&utm_medium=webreferral&utm_campaign=dd-smartbutton&utm_location=module"]Docker Desktop[/url].
2. –°–∫–∞—á–∏–≤–∞–µ—Ç–µ [url="https://github.com/iqubik/routerFW/raw/main/_unpacker.bat"]–∞—Ä—Ö–∏–≤ —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è[/url], –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ `.bat` —Ñ–∞–π–ª.
3. –í –º–µ–Ω—é –≤—ã–±–∏—Ä–∞–µ—Ç–µ `Target` (–≤–∞—à—É –º–æ–¥–µ–ª—å —Ä–æ—É—Ç–µ—Ä–∞).
4. –ó–∞–ø—É—Å–∫–∞–µ—Ç–µ `Build`.
5. –ù–∞ –≤—ã—Ö–æ–¥–µ –ø–æ–ª—É—á–∞–µ—Ç–µ –≥–æ—Ç–æ–≤—É—é –ø—Ä–æ—à–∏–≤–∫—É.[/spoiler]
[size=3][b]üöë –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º (FAQ)[/b][/size]
[spoiler=‚ùì –ü–æ—Å–ª–µ –ø—Ä–æ—à–∏–≤–∫–∏ eMMC –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (OverlayFS –Ω–µ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è)]
–≠—Ç–∞ –ø—Ä–æ–±–ª–µ–º–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –∫–æ–≥–¥–∞ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –Ω–∞ overlay-—Ä–∞–∑–¥–µ–ª–µ (`/dev/mmcblk0p6`) –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–º—É —Ä–∞–∑–º–µ—Ä—É —Ä–∞–∑–¥–µ–ª–∞, –∑–∞–¥–∞–Ω–Ω–æ–º—É –≤ –Ω–æ–≤–æ–π GPT-—Ç–∞–±–ª–∏—Ü–µ. –°–∏—Å—Ç–µ–º–∞ –Ω–µ –º–æ–∂–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å "—Å–ª–æ–º–∞–Ω–Ω—ã–π" —Ä–∞–∑–¥–µ–ª, –∏ –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ.
–†–µ—à–µ–Ω–∏–µ ‚Äî –ø–æ–ª–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞, —á—Ç–æ —Ä–∞–≤–Ω–æ—Å–∏–ª—å–Ω–æ —Å–±—Ä–æ—Å—É –∫ –∑–∞–≤–æ–¥—Å–∫–∏–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º.

[b]–°–ø–æ—Å–æ–± 1: –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–∂–∏–º (Failsafe) ‚Äî –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π[/b]
–≠—Ç–æ —Å–∞–º—ã–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–µ—Ç–æ–¥, —Ç–∞–∫ –∫–∞–∫ —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è overlay, –ø–æ–∑–≤–æ–ª—è—è –Ω–∞–º —Å–ø–æ–∫–æ–π–Ω–æ —Å –Ω–∏–º —Ä–∞–±–æ—Ç–∞—Ç—å.
1.  –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–æ—É—Ç–µ—Ä.
2.  –ö–∞–∫ —Ç–æ–ª—å–∫–æ –Ω–∞—á–Ω–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∫–∞, —á–∞—Å—Ç–æ –Ω–∞–∂–∏–º–∞–π—Ç–µ —Ñ–∏–∑–∏—á–µ—Å–∫—É—é –∫–Ω–æ–ø–∫—É `Reset` –∏–ª–∏ `WPS`, –ø–æ–∫–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –Ω–µ –Ω–∞—á–Ω—É—Ç –±—ã—Å—Ç—Ä–æ –º–∏–≥–∞—Ç—å.
3.  –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Ä–æ—É—Ç–µ—Ä—É –ø–æ LAN (IP –±—É–¥–µ—Ç `192.168.1.1`).
4.  –í–æ–π–¥–∏—Ç–µ –ø–æ SSH –∏ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–π—Ç–µ —Ä–∞–∑–¥–µ–ª:
    [code]mkfs.f2fs -l overlay -f /dev/mmcblk0p6[/code]
5.  –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ—Å—å: `reboot -f`.

[b]–°–ø–æ—Å–æ–± 2: "–ú–µ—Ç–æ–¥ —Å–∞–±–æ—Ç–∞–∂–∞" (–µ—Å–ª–∏ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ Failsafe)[/b]
–ú—ã –∑–∞—Ç–∏—Ä–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ä–∞–∑–¥–µ–ª–∞, —á—Ç–æ–±—ã —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ—Å—á–∏—Ç–∞–ª–∞ –µ–≥–æ –ø—É—Å—Ç—ã–º –∏ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–ª–∞ —Å–∞–º–∞.
1. –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –ø–æ SSH.
2. –í—ã–ø–æ–ª–Ω—è–µ–º –∫–æ–º–∞–Ω–¥—É, –∫–æ—Ç–æ—Ä–∞—è —É–Ω–∏—á—Ç–æ–∂–∏—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã:
[code]dd if=/dev/zero of=/dev/mmcblk0p6 bs=4096 count=100 conv=notrunc[/code]
3. –í—ã–ø–æ–ª–Ω—è–µ–º –∂–µ—Å—Ç–∫—É—é –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É (–æ–±—ã—á–Ω—ã–π `reboot` –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–Ω—É—Ç—å):
[code]reboot -f[/code]
–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç —Ä–∞–∑–¥–µ–ª —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º.

[b]–§–∏–Ω–∞–ª—å–Ω—ã–π —à–∞–≥ (–¥–ª—è –æ–±–æ–∏—Ö —Å–ø–æ—Å–æ–±–æ–≤): –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ SWAP[/b]
–ü–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞ –Ω—É–∂–Ω–æ –∑–∞–Ω–æ–≤–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª –ø–æ–¥–∫–∞—á–∫–∏.
[code]
mkswap /dev/mmcblk0p7
uci set fstab.@swap&#91;-1&#93;=swap
uci set fstab.@swap&#91;-1&#93;.device='/dev/mmcblk0p7'
uci set fstab.@swap&#91;-1&#93;.enabled='1'
uci commit fstab
/etc/init.d/fstab boot
[/code][/spoiler]
[spoiler=‚ùì –†–æ—É—Ç–µ—Ä –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è, –Ω–æ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ U-Boot –∫–æ–Ω—Å–æ–ª–∏]
–ï—Å–ª–∏ "–ø–æ—Ç–µ—Ä—è–ª–∏" –∑–∞–≥—Ä—É–∑–∫—É, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–¥–∞—Ç—å –≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã bootargs –≤—Ä—É—á–Ω—É—é:
[code]
setenv bootargs "console=ttyS0,115200 root=/dev/mmcblk0p5 rootwait"
setenv bootcmd "mmc dev 0; gpt setenv mmc 0 kernel; mmc read ${loadaddr} ${gpt_part_addr} ${gpt_part_size}; bootm ${loadaddr}"
saveenv
reset
[/code][/spoiler]
[spoiler=üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö]
[b]–í—ã—Ä–µ–∑–∞—Ç—å —Ä–∞–∑–¥–µ–ª `factory` (–∫–∞–ª–∏–±—Ä–æ–≤–∫–∏) –∏–∑ –ø–æ–ª–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞:[/b]
–ü–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å "—Ä–æ–¥–Ω—ã–µ" –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ Wi-Fi.
[code]zcat full_backup.img.gz | dd of=factory.bin bs=512 skip=$((0x2400)) count=$((0x1000)) status=progress[/code]

[b]–°—Ä–∞–≤–Ω–∏—Ç—å —Ö–µ—à-—Å—É–º–º—É —Ñ–∞–π–ª–∞ –∏ —Ä–∞–∑–¥–µ–ª–∞ –Ω–∞ –¥–∏—Å–∫–µ:[/b]
–°–ø–æ—Å–æ–± –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –∏–¥–µ–Ω—Ç–∏—á–µ–Ω –ª–∏ —Ñ–∞–π–ª –≤–∞—à–µ–º—É —Ä–∞–∑–¥–µ–ª—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `factory`).
[code]
# –°—á–∏—Ç–∞–µ–º —Ö–µ—à —Ñ–∞–π–ª–∞
sha256sum /tmp/factory.bin
# –°—á–∏—Ç–∞–µ–º —Ö–µ—à —Ä–∞–∑–¥–µ–ª–∞ (p2 - —ç—Ç–æ factory)
dd if=/dev/mmcblk0p2 bs=2M count=1 | sha256sum
[/code][/spoiler]