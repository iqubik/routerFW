***

# OpenWrt Smart Builder v4.0 (iqubik)

–ù–∞–≤–µ—Ä–Ω—è–∫–∞ –º–Ω–æ–≥–∏–µ —Ö–æ—Ç–µ–ª–∏ –∏–º–µ—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –±–∏–Ω–∞—Ä–Ω–∏–∫ —Ä–æ—É—Ç–µ—Ä–∞ —Å –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ñ–∏–≥–æ–º –∏ –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏. –ù–µ –ø—Ä–æ—Å—Ç–æ —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è, –∞ –ø—Ä—è–º–æ–π –æ—Ç–∫–∞—Ç –≤–µ—Ä—Å–∏–∏ –≤ `.bin`!

## üöÄ –û –ø—Ä–æ–µ–∫—Ç–µ

–Ø —Å–æ–æ—Ä—É–¥–∏–ª –∫–æ–Ω–≤–µ–π–µ—Ä –ø–æ —Å–±–æ—Ä–∫–µ –ø—Ä–æ—à–∏–≤–æ–∫ —á–µ—Ä–µ–∑ –±–∏–ª–¥–µ—Ä –≤ **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö** (—Å –ø–æ–º–æ—â—å—é Docker Desktop –ø–æ–¥ Windows 11). –û–Ω —Å–æ–±–∏—Ä–∞–µ—Ç –º–∏–ª–æ –∏ –±–æ–¥—Ä–æ.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
*   **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å:** –°–æ–±–∏—Ä–∞–µ—Ç –∫–∞–∫ —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ (v19 –Ω–∞ —Å–ø–µ—Ü. –¥–æ–∫–µ—Ä-–æ–±—Ä–∞–∑–µ –≤ —Å—Ç–∞—Ä–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏), —Ç–∞–∫ –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ (v24 –≤ —Å–≤–µ–∂–µ–º).
*   **–°–∫–æ—Ä–æ—Å—Ç—å:** –í—Å–µ —Å–±–æ—Ä–∫–∏ –∏–¥—É—Ç —Å —É–º–Ω—ã–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º.
    *   –í—Ä–µ–º—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π —Å–±–æ—Ä–∫–∏: ~30 —Å–µ–∫—É–Ω–¥.
    *   –í—Ä–µ–º—è –ø–µ—Ä–≤–∏—á–Ω–æ–π —Å–±–æ—Ä–∫–∏: –¥–æ 2 –º–∏–Ω—É—Ç (–ø–ª—é—Å ~5 –º–∏–Ω—É—Ç –Ω–∞ –ø–µ—Ä–≤—ã–π —Å—Ç–∞—Ä—Ç –æ–∫—Ä—É–∂–µ–Ω–∏—è).
*   **–ê–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å:** –°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ–¥–Ω–æ–º `.bat` —Ñ–∞–π–ª–µ.

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ù–µ –ø—É–≥–∞–π—Ç–µ—Å—å `base64` –≤—Å—Ç–∞–≤–æ–∫ –≤ –∫–æ–¥–µ ‚Äî –∏—Ö –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –æ–Ω–ª–∞–π–Ω –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å—ë –±–µ–∑–æ–ø–∞—Å–Ω–æ.

---

## üñ• –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```text
========================================
OpenWrt Smart Builder v4.0 (iqubik)
========================================

–û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏:

[1] example_841n.conf
[2] giga.conf
[3] nanopi-r5c.conf

[A] –°–æ–±—Ä–∞—Ç—å –í–°–ï –ø—Ä–æ—Ñ–∏–ª–∏ (–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)
[0] –í—ã—Ö–æ–¥
```

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫

–í—Å–µ –ø–∞–ø–∫–∏, –ø–æ–¥–ø–∞–ø–∫–∏ –∏ —Ñ–∞–π–ª—ã `.bat` —Ñ–∞–π–ª —Å–æ–∑–¥–∞—Å—Ç —Å–∞–º –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.

*   `profiles` ‚Äî –ü–∞–ø–∫–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π —Å–±–æ—Ä–∫–∏. –ü—Ä–æ–≥—Ä–∞–º–º–∞ —Å–∞–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç –∏—Ö –∑–¥–µ—Å—å.
*   `custom_packages` ‚Äî –ü–∞–ø–∫–∞ –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö `.ipk`. –ö–∏–¥–∞–µ–º –∏—Ö —Å—é–¥–∞, –∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ —É–∫–∞–∑—ã–≤–∞–µ–º –≤–µ—Ä–Ω–æ–µ –∏–º—è –ø–∞–∫–µ—Ç–∞ ‚Äî –æ–Ω–∏ "–∑–∞–ø–µ–∫—É—Ç—Å—è" –≤ –ø—Ä–æ—à–∏–≤–∫—É.
*   `custom_files/–Ω–∞–∑–≤–∞–Ω–∏–µ_–ø—Ä–æ—Ñ–∏–ª—è` ‚Äî –ö–æ—Ä–µ–Ω—å –≤–∞—à–µ–π –ø—Ä–æ—à–∏–≤–∫–∏. –ï—Å–ª–∏ —Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å —Å—é–¥–∞ —Ä–æ–¥–Ω–æ–π backup —Å OpenWrt, –ø—Ä–æ—à–∏–≤–∫–∞ –ø–æ–ª—É—á–∏—Ç—Å—è –∑–∞—Ä–∞–Ω–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π.
*   `firmware_output/–Ω–∞–∑–≤–∞–Ω–∏–µ_–ø—Ä–æ—Ñ–∏–ª—è` ‚Äî –ó–¥–µ—Å—å –±—É–¥—É—Ç –ª–µ–∂–∞—Ç—å –≤–∞—à–∏ –≥–æ—Ç–æ–≤—ã–µ –ø—Ä–æ—à–∏–≤–∫–∏ —Å timestamp –≤—Ä–µ–º–µ–Ω–∏ —Å–±–æ—Ä–∫–∏ –≤ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞.

## ‚öôÔ∏è –ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Ñ–∏–ª—è

–§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `example_841n.conf`):

```bash
# –ò–º—è –ø—Ä–æ—Ñ–∏–ª—è (–Ω–∏–∂–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä)
PROFILE_NAME="example_841n"

# –¶–µ–ª—å —Å–±–æ—Ä–∫–∏ (Target Profile)
TARGET_PROFILE="tl-wr841-v9"

# –°—Å—ã–ª–∫–∞ –Ω–∞ ImageBuilder
IMAGEBUILDER_URL="https://downloads.openwrt.org/releases/19.07.9/targets/ar71xx/tiny/openwrt-imagebuilder-19.07.9-ar71xx-tiny.Linux-x86_64.tar.xz"

# –°–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤
# (–ü—Ä–∏–º–µ—Ä: –¥–æ–±–∞–≤–∏—Ç—å luci, —É–±—Ä–∞—Ç—å opkg)
PKGS="luci-base -opkg"

# –†–∞–∑–º–µ—Ä –∫–æ—Ä–Ω—è –≤ –ú–ë
ROOTFS_SIZE="512"
```

---

## üõ† –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è
–î–æ–±–∞–≤–ª–µ–Ω **PowerShell** —Å–∫—Ä–∏–ø—Ç `create_profile.ps1`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –Ω—É–∂–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –¥–ª—è —Å–±–æ—Ä–∫–∏ —á–µ—Ä–µ–∑ –ø–∞—Ä—Å–∏–Ω–≥ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞.

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –°–∞–º `.ps1` —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–∑-–∑–∞ –ø–æ–ª–∏—Ç–∏–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Windows. –î–ª—è –µ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∞–π–ª-–æ–±–µ—Ä—Ç–∫—É: `_run_create_profile.bat`.

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (–ø–∞–ø–∫–∞ `scripts`)

*   `scripts\diag.sh` ‚Äî –°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏, —á—Ç–æ–±—ã –æ—Ç–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –Ω–µ–π—Ä–æ—Å–µ—Ç—å –∏ –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç—ã. –°–æ–±–∏—Ä–∞–µ—Ç –º–∞–∫—Å–∏–º—É–º –¥–∞–Ω–Ω—ã—Ö –æ —Å–∏—Å—Ç–µ–º–µ, –Ω–æ **—Å–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –ø–∞—Ä–æ–ª–∏**.
*   `scripts\packager.sh` ‚Äî –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç. –°–æ–∑–¥–∞—ë—Ç –≤ –ø–∞–ø–∫–µ `/etc/config` —Ñ–∞–π–ª—ã `status` –∏ `status_lite` —Å –ø–æ–ª–Ω—ã–º –∏ —Å–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–º —Å–ø–∏—Å–∫–æ–º –ø–∞–∫–µ—Ç–æ–≤ —ç—Ç–æ–π —Å–∏—Å—Ç–µ–º—ã.
*   `scripts\upgrade.sh` ‚Äî –û–±–Ω–æ–≤–ª—è–ª–∫–∞ –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤, –∞–Ω–∞–ª–æ–≥ `apt upgrade` –≤ Debian.

---

## ‚ùì FAQ (–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã)

*   **Q: –í–æ–∑–º–æ–∂–Ω–æ –ª–∏ –≤ —ç—Ç–æ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–µ –∏–∑–º–µ–Ω—è—Ç—å —Ä–∞–∑–º–µ—Ä —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞? –ù–∞–ø—Ä–∏–º–µ—Ä, —Å–¥–µ–ª–∞—Ç—å 200–ú–± –≤–º–µ—Å—Ç–æ 100–ú–±?**
*   **A:** –î–∞. –ù–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ 4 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞, –≤ –ø—Ä–æ—Ñ–∏–ª—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `ROOTFS_SIZE=""`.

*   **Q: –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–º–µ–Ω–∏—Ç—å –ø–∞–∫–µ—Ç `dnsmasq` –Ω–∞ `dnsmasq-full` –≤—ã–¥–∞—ë—Ç –æ—à–∏–±–∫—É. –ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å?**
*   **A:** –ü—Ä–æ–±–ª–µ–º–∞ —Å–≤—è–∑–∞–Ω–∞ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –ø–æ–ª–Ω—ã—Ö –≤–µ—Ä—Å–∏–π –ø–∞–∫–µ—Ç–æ–≤.
–ú–µ—Ç–æ–¥–∏–∫–∞ —Ä–µ—à–µ–Ω–∏—è:
1. –í –≥–æ—Ç–æ–≤–æ–π –ø—Ä–æ—à–∏–≤–∫–µ (–º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ 7zip) –≤ –ø—É—Ç–∏ `/usr/lib/opkg/status` –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤.
2. –ï—Å–ª–∏ –ø–æ–¥ –ø–∞–∫–µ—Ç–æ–º –Ω–∞–ø–∏—Å–∞–Ω–æ `autoinstalled: yes` ‚Äî –∑–Ω–∞—á–∏—Ç, –∫–∞–∫–æ–π-—Ç–æ –¥—Ä—É–≥–æ–π –ø–∞–∫–µ—Ç –∑–∞—Ç—Ä–µ–±–æ–≤–∞–ª –∏–º–µ–Ω–Ω–æ –µ–≥–æ.
3. –ù—É–∂–Ω–æ –Ω–∞–π—Ç–∏ "–≤–∏–Ω–æ–≤–Ω–∏–∫–∞" –∏ –ª–∏–±–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –µ–≥–æ —á–∞—Å—Ç–∏, –ª–∏–±–æ —è–≤–Ω–æ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç.
4. –í —Å–ø–∏—Å–∫–µ –ø–∞–∫–µ—Ç–æ–≤ (`PKGS`) —É–∫–∞–∂–∏—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞ —á–µ—Ä–µ–∑ –º–∏–Ω—É—Å (`-dnsmasq`), –∞ –∑–∞—Ç–µ–º –¥–æ–±–∞–≤—å—Ç–µ –Ω—É–∂–Ω—ã–π (`dnsmasq-full`).

---
*–ü—Ä–∏—è—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!*